(function(){angular.module("SortFilterPaginate",["SortFilterPaginate.directives","SortFilterPaginate.service"]);angular.module("SortFilterPaginate.directives",[]);angular.module("SortFilterPaginate.service",[])})();
(function(){angular.module("SortFilterPaginate.service").factory("SFP",["$timeout",function(a){var c=function(a){this.Model=a;this.count=0;this.options={skip:0,limit:20,sort:{},filter:{}};this.defaultOptions={};this.throttleDelay=500;this.loading=this.throttling=!1;this.results=[]};c.prototype.parameters=function(){var a="",d=angular.copy(this.defaultOptions);angular.extend(d,this.options);angular.forEach(this.options.sort,function(d,f){d&&(a=(a+" "+(-1===d?"-":"")+f).trim())});delete d.filter;angular.forEach(this.options.filter,
function(a,b){a&&(d["filter["+b+"]"]=a)});a.length?d.sort=a:delete d.sort;return d};c.prototype.throttle=function(){var b=this;this.throttling&&a.cancel(this.throttling);this.throttling=a(function(){b.query();b.throttling=!1},this.throttleDelay)};c.prototype.query=function(b){var d=this;this.loading=!0;this.throttling&&a.cancel(this.throttling);return this.results=this.Model.query(this.parameters(),function(a,c){d.count=c("x-count");"function"===typeof b&&b.apply(this,arguments);d.loading=!1})};return c}])})();
(function(){angular.module("SortFilterPaginate.directives").directive("sort",function(){return{templateUrl:"/Public/components/angular-sort-filter-paginate/sort.html",restrict:"E",transclude:!0,replace:!0,scope:{model:"=",predicate:"@",onSort:"=",type:"@"},link:function(a,c,b){a.direction=0;a.sortClass="";a.sort=function(){switch(a.direction){case 1:a.model.options.sort[b.predicate]=-1;break;case -1:a.model.options.sort[b.predicate]=0;break;default:a.model.options.sort[b.predicate]=1}if("function"===
typeof a.onSort)a.onSort();else a.model.query()};a.$watch("model.options.sort['"+b.predicate.replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")+"']",function(b){switch(b){case -1:a.direction=-1;break;case 1:a.direction=1;break;default:a.direction=0}a.type||(a.type="alphabet");a.sortClass=0===a.direction?"":a.type+(-1===a.direction?"-alt":"")})}}})})();
(function(){angular.module("SortFilterPaginate.directives").directive("filter",function(){return{restrict:"E",scope:{model:"=",onFilter:"=",predicate:"@"},link:function(a,c,b){a.$watch("model.options.filter['"+b.predicate+"']",function(b,c){if(b!==c)if("function"===typeof a.onFilter)a.onFilter();else a.model.throttle()})}}})})();
(function(){angular.module("SortFilterPaginate.directives").directive("paginate",function(){return{templateUrl:"/Public/components/angular-sort-filter-paginate/paginate.html",restrict:"E",replace:!0,scope:{onPaginate:"=",model:"="},controller:["$scope",function(a){a.pages=[];a.page=0;a.pageCount=0;a.paginate=function(b){a.page=b;if(a.model.options.skip!==b*a.model.options.limit)if(a.model.options.skip=b*a.model.options.limit,"function"===typeof a.onPaginate)a.onPaginate();else a.model.query()};var c=
function(){if(0<a.model.count){a.pageCount=Math.floor(a.model.count/a.model.options.limit);for(var b=Math.floor(a.model.options.skip/a.model.options.limit),d=Math.ceil(Math.log(a.pageCount)/Math.LN10),c=[],f=[],e=0,g=1;g<d;g++)e=Math.pow(10,g),b<a.pageCount-e&&f.push({p:b+e,t:a.model.options.limit*(b+e),l:b+e}),b>e&&c.unshift({p:b-e,t:a.model.options.limit*(b-e),l:b-e});b<a.pageCount-1&&f.push({p:b+1,l:"\u203a"});1<b&&c.unshift({p:b-1,l:"\u2039"});b!==a.pageCount?f.push({p:a.pageCount,l:"\u00bb",
t:a.pageCount}):f.push({p:a.pageCount,l:"\u00bb",c:"disabled"});0!==b?c.unshift({p:0,l:"\u00ab",t:0}):c.unshift({p:0,l:"\u00ab",c:"disabled"});a.pages=c.concat([{p:b,l:b,t:a.model.options.skip,c:"active"}],f)}else a.pages=[]};a.$watch("model.count",c);a.$watch("model.options.skip",c)}]}})})();